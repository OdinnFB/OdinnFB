<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Control Panel</title>
  <style>
    :root { --btn-height: 64px; --gap: 10px; }
    * { box-sizing: border-box; }
    html { overflow: hidden; }
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; padding: 16px; margin: 0; background: #2b2b2b; color: #eef6fb; width: 100%; height: 100vh; overflow: hidden; position: relative; }
    .controls { max-width: 1000px; margin: 12px auto; position: relative; z-index: 2; }
    h1 { margin: 0 0 12px 0; font-size: 1.4rem; }
    label { display: block; margin-bottom: 8px; font-weight: 600; }
    #brightness, #volume { width: 100%; margin-bottom: 12px; }
    .now-playing {
      background: rgba(167, 232, 255, 0.1);
      border-left: 3px solid #a7e8ff;
      padding: 10px 12px;
      margin: 12px 0;
      border-radius: 4px;
      font-size: 14px;
      color: #a7e8ff;
      font-weight: 500;
    }
    .track-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      grid-auto-rows: var(--btn-height);
      gap: var(--gap);
      margin-top: 8px;
    }
    .track-grid button {
      width: 100%;
      height: 100%;
      border: none;
      background: linear-gradient(180deg,#a7e8ff,#67cfff);
      color: #022b3a;
      font-size: 15px;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      padding: 8px 10px;
      text-align: center;
      box-shadow: 0 2px 0 rgba(0,0,0,0.06) inset;
    }
    .track-grid button:hover { filter: brightness(0.98); }
    .track-grid button:active { transform: translateY(1px); }
    .track-grid button:focus { outline: 3px solid rgba(167,232,255,0.32); }
    @media (max-width: 900px) {
      .track-grid { grid-template-columns: repeat(4, 1fr); }
    }
    @media (max-width: 640px) {
      /* Mobile: 2 columns x 5 rows for 10 buttons */
      .track-grid { grid-template-columns: repeat(2, 1fr); grid-auto-rows: 56px; }
    }
  </style>
</head>
<body>
  <div class="controls">
    <h1>Control Panel</h1>

    <label for="brightness">Brightness</label>
    <input type="range" min="0" max="255" id="brightness" aria-label="Brightness slider">

    <label for="volume">Volume</label>
    <input type="range" min="0" max="100" id="volume" aria-label="Volume slider">

    <div class="now-playing">Now playing: <span id="nowPlayingText">None</span></div>

    <div class="track-grid" role="list" aria-label="Track selection">
      <button role="listitem" onclick="setTrack('PiAudio/Black Nile.mp3')">Black Nile</button>
      <button role="listitem" onclick="setTrack('PiAudio/Cry Me A River.mp3')">Cry Me A River</button>
      <button role="listitem" onclick="setTrack('PiAudio/Giant Steps.mp3')">Giant Steps</button>
      <button role="listitem" onclick="setTrack('PiAudio/Goodbye Pork Pie Hat.mp3')">Goodbye Pork Pie Hat</button>
      <button role="listitem" onclick="setTrack('PiAudio/Maiden Voyage.mp3')">Maiden Voyage</button>
      <button role="listitem" onclick="setTrack('PiAudio/Misty.mp3')">Misty</button>
      <button role="listitem" onclick="setTrack('PiAudio/My Funny Valentine.mp3')">My Funny Valentine</button>
      <button role="listitem" onclick="setTrack('PiAudio/Night Train.mp3')">Night Train</button>
      <button role="listitem" onclick="setTrack('PiAudio/Take Five.mp3')">Take Five</button>
      <button role="listitem" onclick="setTrack('PiAudio/Virgo.mp3')">Virgo</button>
    </div>
  </div>

  <script>
    // Track display
    let currentTrack = 'None';
    const trackNameMap = {
      'PiAudio/Black Nile.mp3': 'Black Nile',
      'PiAudio/Cry Me A River.mp3': 'Cry Me A River',
      'PiAudio/Giant Steps.mp3': 'Giant Steps',
      'PiAudio/Goodbye Pork Pie Hat.mp3': 'Goodbye Pork Pie Hat',
      'PiAudio/Maiden Voyage.mp3': 'Maiden Voyage',
      'PiAudio/Misty.mp3': 'Misty',
      'PiAudio/My Funny Valentine.mp3': 'My Funny Valentine',
      'PiAudio/Night Train.mp3': 'Night Train',
      'PiAudio/Take Five.mp3': 'Take Five',
      'PiAudio/Virgo.mp3': 'Virgo'
    };

    // Brightness control
    document.getElementById("brightness").oninput = function() {
      fetch("/set_brightness", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({value: this.value})
      });
    };

    // Volume control
    document.getElementById("volume").oninput = function() {
      fetch("/set_volume", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({value: this.value})
      });
    };

    // Track selection
    function setTrack(track) {
      currentTrack = trackNameMap[track] || track;
      document.getElementById('nowPlayingText').textContent = currentTrack;
      fetch("/set_track", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({track})
      });
    }
  </script>
</body>
</html>